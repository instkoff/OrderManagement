@(Html.DevExtreme().DataGrid<OrderModel>()
    .ID("gridContainer")
    .ShowBorders(true)
    .DataSource(d=>d.WebApi().Controller("Order").LoadAction("GetAll").Key("Id"))
        .HoverStateEnabled(true)
    .FilterRow(f=>f.Visible(true))
    .HeaderFilter(f=>f.Visible(true))
    .Columns(c =>
    {
        c.AddFor(o => o.Name);
        c.AddFor(o=>o.Date).Format("dd.MM.yyyy hh:mm:ss");
        c.AddFor(o => o.Provider.Name);
        c.Add().Type(GridCommandColumnType.Buttons).Buttons(b => b.Add()
            .Hint("Edit").Icon("edit").OnClick("function(e) { window.location.href = '/Order/' + e.row.data.Id; }"));
    })
    .MasterDetail(md=>md.Enabled(true)
        .Template(@<text>
                      @(Html.DevExtreme().DataGrid<OrderItemModel>()
                          .DataSource(ds=>ds.Mvc()
                              .Controller("Order")
                              .LoadAction("GetOrderDetails")
                              .LoadParams(new { orderId = new JS("key") }))
                          .Columns(c =>
                              {
                                  c.AddFor(oi => oi.ItemName).Caption("Название");
                                  c.AddFor(oi => oi.Quantity).Caption("Количество");
                                  c.AddFor(oi => oi.Unit).Caption("Единицы");
                              }))
                   </text>)))
